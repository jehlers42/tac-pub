{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"sampleCookbook/","title":"Crunchyroll Game Vault API Cookbook","text":"<p>Crunchyroll's Game Vault provides an ever-expanding set of games to our users. Subscribers that have the appropriate membership tier can access the Game Vault and download games to their mobile device as they would with other mobile games.</p> <p>Full integration with Game Vault provides a standardized login flow for your users. When they open your game they'll see a login page where they can enter their Crunchyroll credentials. If they have a subscription with Game Vault access, the flow will let them access your game immediately. If not, it will guide them to a screen where they can upgrade their subscription to the appropriate tier.</p> <p>For any questions about processes and APIs not covered in this Cookbook, reach out to your Crunchyroll representative.</p>"},{"location":"sampleCookbook/#game-vault-apis","title":"Game Vault APIs","text":"<p>As a Game Vault partner, you'll use several APIs to integrate with Crunchyroll services. The endpoints outlined in this document come from the following Crunchyroll APIs:</p> <ul> <li><code>cx-account</code></li> <li><code>cx-account-auth</code></li> <li><code>cx-partners</code></li> <li><code>cx-subscription-processor</code></li> </ul> <p>External access to these APIs is only available to approved Game Vault partners, teams, and vendors. You can use these endpoints to perform the following tasks:</p> <ul> <li>Create user accounts.</li> <li>Modify existing user accounts.</li> <li>Set up password recovery options.</li> <li>Create access tokens.</li> <li>Retrieve a user's subscription tier and its associated benefits.</li> <li>Validate an iOS user with an iTunes receipt.</li> </ul> <p>During production of your Game Vault project you can access these API endpoints using the Crunchroll production server: <code>https://xxx.crunchyroll.com/</code></p> <p>If you need to use the staging server, you can access it with this address: <code>https://xxx.crunchyroll.com/</code></p> <p>!!! info     You must set up and connect to the Crunchyroll VPN before you can use the staging server.</p> <p>Endpoints Overview</p> Method and Endpoint Description <code>POST /accounts/v1</code> Creates a new user account through the <code>cx-account</code> API. <code>GET /accounts/v1/{account_id}/profile</code> Retrieves the profile information for a user's account. <code>GET /accounts/v1/tokens/password/{token}</code> Uses an account's token ID to retrieve an account-specific password reset token. <code>POST /accounts/v1/password_forgot</code> Triggers the <code>cx-account</code> API to send a user a password reset email. <code>POST /accounts/v1/password_reset</code> Changes a user's password using their one-time password reset token. <code>POST /auth/v1/token</code> Retrieves a user's access token after providing a set of parameters. The parameters you use depend on the authorization method your game uses. <code>POST /itunes/receipt-verification</code> Validates a user's iTunes receipt and then associates that receipt with a subscription account. <code>GET /subscriptions/{account_id}/benefits</code> Retrieves a list of benefits associated with the requested account."},{"location":"sampleCookbook/#post-accountsv1","title":"POST /accounts/v1","text":"<p>Creates a new user account, including any optional profile information.</p> <p>``` title=\"URI\" POST https://xxx.crunchyroll.com/accounts/v1</p> <pre><code>\n#### Header Parameters\n\n| Name | Type | Required | Description |\n| -- | -- | -- | -- |\n| **X-Tenant** | string | Yes | The requested tenant. A list of supported tenants is available in the [API service config file](https://github.com/crunchyroll/).&lt;br&gt;Do not use if a client accesses the external server through an AWS CloudFront URL. |\n\n#### Request Body\n\nThe parameters here are defined in the `CreateAccount` schema.\n\nYou can provide additional profile information by adding fields from the [profile validation configuration](https://github.com/crunchyroll/).\n\n| Name | Type | Required | Description |\n| -- | -- | -- | -- |\n| **email** | string | Yes | The email address for the new account. |\n| **password** | string | Yes | The plain-text password for the new account. |\n| **username** | string |  | The username for the new account. |\n| **profile_name** | string |  | The profile name to use for the main account.&lt;br&gt;This value is alphanumeric and must contain at least one (1) character. 50 character maximum. |\n\n##### Example Request\n\n```js\n{\n  \"email\": \"example@example.com\",\n  \"password\": \"myverystrongpassword\",\n  \"username\": \"foo_bar_92\",\n  \"maturity_rating\": \"M3\",\n  \"extended_maturity_rating\":\n    { \"BR\": \"18\" },\n  \"profile_name\": \"profileName1234\"\n}\n</code></pre>"},{"location":"sampleCookbook/#responses","title":"Responses","text":"Code Description 204 Account successfully created. 400 Request validation failed. 401 Authorization failed. 403 Access is forbidden."},{"location":"sampleCookbook/#game-vault-silent-login","title":"Game Vault Silent Login","text":"<p>Silent login provides a method for mobile apps to access Game Vault APIs. This service is available as an option in apps developed for Android and iOS.</p>"},{"location":"sampleCookbook/#android","title":"Android","text":"<p>Users must install and sign in to the Android app. The app must be distributed using the Crunchyroll Google Play account before they can use silent login.</p> <p>You can access a sample app on the <code>cx-android-app</code> GitHub repository. If you don't have access, contact your Crunchyroll representative.</p>"},{"location":"sampleCookbook/#set-up-an-android-app","title":"Set Up an Android App","text":"<p>To view refresh tokens and enable silent login for your Android app, add the following permission to your <code>AndroidManifest.xml</code> file:</p> <pre><code>&lt;uses-permission android:name=\"com.crunchyroll.crunchyroid\" /&gt;\n</code></pre> <p>Add the following tag to the <code>AndroidManifest.xml</code> file of the app that will access silent login provider:</p> <pre><code>&lt;queries&gt;\n    &lt;provider\n        android:authorities=\"com.crunchyroll.crunchyroid\" /&gt;\n&lt;/queries&gt;\n</code></pre> <p>The following example uses a Kotlin function to access a refresh token with <code>CredentialsProvider</code>:</p> <pre><code>fun getRefreshToken(): String {\n    val uri = Uri.parse(\"content://com.crunchyroll.crunchyroid\")\n    val cursor = contentResolver.query(uri, null, null, null, null)\n    if (cursor != null) {\n        if (cursor.moveToFirst()) {\n            val refreshToken = cursor.getString(0)\n            return refreshToken\n        }\n    }\n    cursor?.close()\n    return \"\"\n}\n</code></pre>"},{"location":"sampleCookbook/#ios","title":"iOS","text":"<p>On iOS, apps save the user's refresh token in a shared keychain that any app from the same app group can access. Apps with the same App ID Prefix setup are considered part of the same app group.</p> <p>Before you can enable silent login for an iOS app, you must be a member the Crunchyroll Apple Development Team. Your app must be distributed through Crunchyroll's AppStoreConnect account or with TestFlight.</p> <p>A user's refresh token contains the following information in UTF8 format:</p> Keychain Service Name <code>crunchyroll.ios</code> Keychain Access Group <code>crunchyroll.iphone</code> Keychain Key <code>crunchyroll.token</code>"},{"location":"sampleCookbook/#set-up-an-ios-app","title":"Set Up an iOS App","text":"<p>To set up your app for iOS</p> <ol> <li>Make sure you have Keychain Sharing enabled in the Sharing &amp; Capabilities menu of Xcode.</li> <li>Add crunchyroll.iphone to Keychain Groups.</li> <li>Add the <code>$(AppIdentifierPrefix)crunchyroll.iphone</code> keychain group to your app's *.entitlements file.</li> </ol> <p>The following code snippet performs a silent login if there is a valid refresh token in the user's shared Keychain.</p> <pre><code>func performSilentLogin() {\n    let keychainService = \"crunchyroll.ios\"\n    let keychainRefreshTokenKey = \"crunchyroll.token\"\n    let keychainAccessGroup = \"crunchyroll.iphone\"\n    let keychain = Keychain(service: keychainService, accessGroup: keychainAccessGroup)\n    if let token = try? keychain.get(keychainRefreshTokenKey) {\n        // Get JWT using refresh token by calling \"POST /auth/v1/token\" with\n        // grant_type = refresh_token\n        // refresh_token = {token}\n    } else {\n        // CR iOS app is not installed or user is not logged in\n    }\n}\n</code></pre>"},{"location":"sampleCookbook/#json-web-key-sets","title":"JSON Web Key Sets","text":"<p>Crunchyroll provides a method to obtain JSON Web Key (JWK) sets that let you validate a user's JSON Web Token (JWT). If the user's JWT contains a <code>cr_bento</code> claim, they are on a subscription tier that includes Game Vault. JWKs are cached for up to one (1) hour and are rotated at least once every 30 days.</p> <p>!!! warning     Even though JWTs are limited in scope by the client ID issued to your team, they are still considered sensitive data and you should never store or log them on a server.</p>"}]}